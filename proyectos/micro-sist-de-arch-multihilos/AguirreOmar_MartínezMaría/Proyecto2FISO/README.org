#+title: Proyecto: (Micro) sistema de archivos multihilos

#+BEGIN_SRC yaml
Planteamiento: 2024.10.17
Entrega: 2024.11.05
#+END_SRC

# ¬°Las [[./calificaciones.org][calificaciones y comentarios]] ya est√°n disponibles!

** Descripci√≥n del proyecto

Trabajaremos este proyecto conjunto para las √∫ltimas dos unidades:

- Sistemas de archivos :: Resulta natural que el proyecto sea implementar un
  sistema de archivos üòâ Para esto, lo har√°n trabajando sobre una
  /especificaci√≥n/ y sobre un /caso de referencia/.
- Administraci√≥n de procesos :: Para esta unidad toca dividir la l√≥gica de un
  proceso en sus componentes /concurrentes/, buscando que se comuniquen los
  cambios de estado empleando /mecanismos de sincronizaci√≥n/.

** ¬øQu√© tengo que hacer?

Lo que ustedes deben desarrollar es un programa que pueda obtener, crear y
modificar informaci√≥n en el micro-sistema-de-archivos que desarroll√© para la
Facultad de Ingenier√≠a, =FiUnamFS=.

Siguiendo la especificaci√≥n que aparece en la siguiente secci√≥n, tienen que
desarrollar un programa que pueda:

1. Listar los contenidos del directorio
2. Copiar uno de los archivos de dentro del =FiUnamFS= hacia tu sistema
3. Copiar un archivo de tu computadora hacia tu =FiUnamFS=
4. Eliminar un archivo del =FiUnamFS=
5. El programa que desarrollen debe contar, por lo menos, dos hilos de
   ejecuci√≥n, operando /concurrentemente/, y que se /comuniquen su estado/
   mediante mecanismos de sincronizaci√≥n.

*** Sistema muestra

Para verificar su implementaci√≥n, pueden [[./fiunamfs.img][descargar un sistema de archivos
ejemplo]] que cumple con el planteamiento. Verifiquen que pueden realizar todas
las tareas que les solicit√© con √©ste. Ind√≠quenme ‚Äî ¬øCu√°les son los contenidos
del /¬´disco¬ª/?

** Especificaci√≥n de =FiUnamFS=

- El sistema de archivos cabe en un /diskette/ tradicional. Claro, no espero que
  tengan acceso al hardware, por lo que lo simularemos represent√°ndolo en un
  archivo de longitud fija, de 1440 Kilobytes
- Por simplicidad, en todas las estructuras de FIUnamFS, las cadenas de texto
  deben ser ASCII 8-bit (/no/ requerimos que sean Unicode UTF-8).
- En las estructuras del disco, todos los enteros ser√°n representados como
  valores de 32 bits, en formato /little endian/.
  - Esto es, por ejemplo: El valor =1354= se representar√° como los bytes =(74,
    5, 0, 0)= (porque =((0 * 256 + 0) * 256 + 5) * 256 + 74 = 1354=). El valor
    =1234567890= se representar√° como los bytes =210, 2, 150, 7= (porque =((7 *
    256 + 150) * 256 + 2) * 256 + 210 = 1234567890=.
  - Para hacer las conversiones desde o hacia este formato, les sugiero usar el
    formato =<I= con las funciones =pack()= y =unpack()=, disponibles en
    distintos lenguajes ([[https://docs.python.org/3/library/struct.html][Python: struct.pack()]], [[https://ruby-doc.com/core/Array.html#method-i-pack][Ruby: Array#pack()]], [[https://perldoc.perl.org/perlpacktut][Perl:
    pack()]], [[https://www.php.net/manual/en/function.pack.php][PHP: pack()]], hay varias biblitecas que pueden usar para
    Javascript, como [[https://github.com/pgriess/node-jspack][node-jspack]] o [[https://github.com/ryanrolds/bufferpack][bufferpack]]). Si van a usar C o C++, les
    sugiero revisar las funciones [[https://linux.die.net/man/3/htons][htons() y ntohs()]]. ¬øJava? Si bien no forman
    parte del lenguaje, pueden encontrar [[https://stackoverflow.com/questions/2675957/java-implementing-htonl#15547976][varias]] [[https://coderanch.com/t/366549/java/Java-equivilent-functions-htonl-ntohl][implementaciones]] de =htons()= y
    =ntohs()= en la red.
- La superficie del disco se divide en sectores de 256 bytes. Cada /cluster/
  mide cuatro sectores.
- El pseudodispositivo no maneja /tabla de particiones/, sino que hospeda
  directamente un /volumen/ en la totalidad de su espacio.
- =FiUnamFS= maneja √∫nicamente un /directorio plano/, no se consideran
  subdirectorios.
- El primer cluster (#0) del pseudodispositivo es el
  /superbloque/. Este contiene informaci√≥n en los siguientes bytes:
  - 0--8 :: Para identificaci√≥n, el nombre del sistema de archivos. ¬°Debes
    validar nunca modificar un sistema de archivos que no sea el correcto! Debe
    ser la cadena =FiUnamFS=.
  - 10--14 :: Versi√≥n de la implementaci√≥n. Estamos implementando la versi√≥n
    =25-1= (ojo, es una /cadena/, no un n√∫mero). Deben validar que el sistema de
    archivos a utilizar sea exactamente esta versi√≥n, para evitar la corrupci√≥n
    de datos.
  - 20--35 :: Etiqueta del volumen
  - 40--44 :: Tama√±o del cluster en bytes
  - 45--49 :: N√∫mero de clusters que mide el directorio
  - 50--54 :: N√∫mero de clusters que mide la unidad completa
  El resto del superbloque puede quedar vac√≠o (o puedes /sobrecargarlo/ con
  otros datos ‚Äî No es importante para la implementaci√≥n.

- El sistema de archivos es de /asignaci√≥n contigua/. Toda la informaci√≥n de los
  archivos est√° en el directorio.
- El directorio est√° ubicado en los clusters 1 a 4. Cada entrada del directorio
  mide 64 bytes, consistentes en:
  - 0 :: Tipo de archivo. Dado que el sistema de archivos actual no tien soporte
    para directorios, dispositivos, pipes, ni otros archivos especiales, siempre
    ser√° el caracter =.= (=0x2e=, =46=). Cuando la entrada est√° vac√≠a, se indica
    con el caracter =#= (=0x23=, =35=).
  - 1--15 :: Nombre del archivo
  - 16--20 :: Tama√±o del archivo, en bytes
  - 20--23 :: Cluster inicial
  - 24--37 :: Hora y fecha de creaci√≥n del archivo, especificando AAAAMMDDHHMMSS
    (p.ej. '20221108182600' para 2022-11-08 18:26:00)
  - 38-51 :: Hora y fecha de √∫ltima modificaci√≥n del archivo, especificando
    AAAAMMDDHHMMSS (p.ej. '20221109182600')
  - 52--64 :: Espacio no utilizado (¬øreservado para expansi√≥n futura?)
- Las entradas no utilizadas del directorio se identifican porque en el campo de
  nombre llevan la cadena =---------------=.
  - Los nombres de archivos pueden componerse de cualquier caracter dentro del
    subconjunto ASCII de 7 bits (no acentuados, no Unicode, s√≥lo el /viejo y
    aburrido/ US-ASCII)
- Es un sistema de archivos plano ‚Äî No maneja subdirectorios.
- Despu√©s del directorio, todo el espacio restante es espacio de datos.


** Calificaci√≥n del proyecto

|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
|                          | *Excelente (100%)*                                                                                                                                                                                                                                                 | *Bueno (75%)*                                                                                                                                                   | *Suficiente (50%)*                                                                                                                                               | *Insuficiente (0%)*                                                                                                        | *Peso* |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| *Proyecto*               |                                                                                                                                                                                                                                                                    |                                                                                                                                                                 |                                                                                                                                                                  |                                                                                                                            |    30% |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Cumplimiento/           | Se cumplen los cinco puntos planteados: Listar los contenidos, copiar un archivo de FiUNAMfs hacia tu equipo, copiar un archivo de tu equipo hacia FiUNAMfs, eliminar un archivo, sincronizaci√≥n entre hilos                                                       | Se cumplen cuatro de los objetivos                                                                                                                              | Se cumplen tres o dos de los objetivos                                                                                                                           | Se cumple uno solo de los objetivos o ninguno                                                                              |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Claridad de desarrollo/ | El c√≥digo, acompa√±ado de la documentaci√≥n, resultan de clara comprensi√≥n, a pesar de cualquier nivel de complejidad que mantengan                                                                                                                                  | El c√≥digo es ofuscado, dificil de seguir, pero la lectura de la documentaci√≥n ayuda a hacerlo                                                                   | Es dificil comprender la forma en que se desarroll√≥ incluso teniendo la documentaci√≥n, o esta est√° incompleta y no cubre este aspecto                            | Imposible de comprender                                                                                                    |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Interfaz usuario/       | M√≥dulo de FUSE, o interfaz gr√°fica/navegaci√≥n textual que no requiera de ayuda para realizar las operaciones requeridas                                                                                                                                            | Interfaz gr√°fica / navegaci√≥n textual que requiere comprender documentaci√≥n; interfaz de l√≠nea de comandos sencilla o natural                                   | La interfaz usuario es suficiente para presentar y manipular los datos, pero su uso requiere comprender el c√≥digo fuente                                         | El programa es imposible de utilizar exitosamente sin conocer la implementaci√≥n detalladamente                             |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| *Desarrollo*             |                                                                                                                                                                                                                                                                    |                                                                                                                                                                 |                                                                                                                                                                  |                                                                                                                            |    30% |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Directorio de proyecto/ | El trabajo entregado consta exclusivamente del c√≥digo fuente y la documentaci√≥n, en una estructura acorde para su construcci√≥n/compilaci√≥n, evaluaci√≥n y uso directo; en caso de requerirlo, un .gitignore mantiene limpio el directorio al compilar               | S√≥lo el c√≥digo fuente y la documentaci√≥n forman parte de los commits, pero construir / ejecutar el c√≥digo ensucia al repositorio (¬ødeber√≠a manejar .gitignore?) | El trabajo entregado incluye archivos innecesarios (como archivos objeto ya compilados o subdirectorios generados por el entorno de desarrollo empleado          | No entreg√≥ usando Git                                                                                                      |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /C√≥digo v√°lido/          | Al ejecutar las instrucciones documentadas, el c√≥digo puede ejecutarse exitosamente al primer intento                                                                                                                                                              | Las instrucciones que forman parte de la documentaci√≥n tienen que adecuarse para poder ejecutar el c√≥digo, o hay errores menores que corregir para que funcione | No est√° documentado c√≥mo ejecutar el c√≥digo, o hay errores mayores que corregir para poder ejecutarlo                                                            | Result√≥ imposible probar la ejecuci√≥n                                                                                      |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Comentarios/            | El c√≥digo est√° comentado donde hace falta, no repite informaci√≥n obvia. Los comentarios ayudan a comprender la l√≥gica, no la implementaci√≥n                                                                                                                        | El c√≥digo est√° comentado donde hace falta, pero los comentarios son excesivos: Adem√°s de la l√≥gica general, mencionan lo obvio                                  | Hay algunos comentarios √∫tiles en el programa, pero falta mucho para que ayude a una buena comprensi√≥n                                                           | No hay comentarios                                                                                                         |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| *Legibilidad*            |                                                                                                                                                                                                                                                                    |                                                                                                                                                                 |                                                                                                                                                                  |                                                                                                                            |    20% |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| Estructura               | El c√≥digo est√° bien organizado y emplea un estilo de indentaci√≥n de forma consistente                                                                                                                                                                              | El c√≥digo est√° mayormente indentado; hay inconsistencias menores                                                                                                | Falta claridad en los bloques por no emplear indentaci√≥n o hacerlo de forma absolutamente inconsistente                                                          |                                                                                                                            |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| Nomenclatura             | Los nombres de los s√≠mbolos (variables, funciones, m√©todos, clases) son claros y acorde a su funci√≥n; los principales elementos est√°n documentados expresamente                                                                                                    | Los nombres de los s√≠mbolos mencionados son claros y acorde a su funci√≥n, aunque no est√©n documentados                                                          | Los nombres de los s√≠mbolos no son claros, pero su uso y significado forma parte de la documentaci√≥n                                                             | Cuesta trabajo seguir la l√≥gica; los s√≠mbolos empleados no tienen nombres significativos, y su funci√≥n no est√° documentada |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| *Entrega*                |                                                                                                                                                                                                                                                                    |                                                                                                                                                                 |                                                                                                                                                                  |                                                                                                                            |    20% |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Documentaci√≥n externa/  | Autores, estrategia, requisitos y explicaci√≥n acerca del uso, descripci√≥n de la sincronizaci√≥n empleada, ejemplos de uso                                                                                                                                           |                                                                                                                                                                 |                                                                                                                                                                  |                                                                                                                            |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Entorno y dependencias/ | Presenta el entorno para el cual el programa fue escrito, detallando seg√∫n sea pertinente lenguaje (incluyendo la implementaci√≥n y versi√≥n mayor), principales m√≥dulos que deben ser instalados (con sus respectivas versiones), y dem√°s instrucciones pertinentes |                                                                                                                                                                 | Indica los principales componentes requeridos para la construcci√≥n y ejecuci√≥n del proyecto, pero omite detalles importantes que dificultan su exitosa ejecuci√≥n |                                                                                                                            |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Historia en Git/        | El proyecto consta de un m√≠nimo de cinco commits, con informaci√≥n suficientemente descriptiva para comprender el proceso de desarrollo                                                                                                                             | Consta de un m√≠nimo de cinco commits, pero no presentan un t√≠tulo/comentario suficiente para entender el proceso de desarrollo                                  | La entrega consta de un s√≥lo commit, no permite entender el proceso de desarrollo del proyecto                                                                   | No entreg√≥ usando Git                                                                                                      |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
